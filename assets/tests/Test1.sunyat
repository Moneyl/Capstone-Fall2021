
;;; Test1.sunyat
;;; Simple infinite loop. Switches between forward and backwards movement periodically

; Increment r0 forever
!main
add r0 1
mov r2 2
store P_STEERING r2 ; Constant turning

; if r0 > 15 then move forward,
cmp r0 5
jgr !forward
; if r0 > 0 && <= 15 then move backward
cmp r0 5
jls !backward

; if r0 >= 30, r1++ and r0 = 0
!reset_check
cmp r0 10
jls !main
add r1 1
mov r0 0
jmp !main

; Move forward & turn clockwise
!forward
mov r2 5
store P_SPEDOMETER r2
jmp !reset_check

; Move backwards & turn counter clockwise
!backward
mov r2 -5
store P_SPEDOMETER r2
jmp !reset_check